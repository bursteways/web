---
import { Image } from '@astrojs/image/components';
import { getAllPages } from 'lib/api';
import Logo from 'public/logo.svg';

const allPages = await getAllPages();

const NAV_HEIGHT = 'h-24';
---

<header
  id="navbar"
  class={`px-8 ${NAV_HEIGHT} fixed overflow-hidden top-0 w-full bg-transparent duration-300`}
>
  <div class="flex justify-between items-center h-full">
    <div id="logo">
      <a href="/">
        <Image src={Logo} alt="logo" height={80} width={80} />
      </a>
    </div>
    <div class="flex gap-3">
      {allPages?.map((page: any) => <a href={`/${page.slug}`}>{page.title}</a>)}
    </div>
  </div>
</header>

<script>
  const NAV_HEIGHT = 'h-24';
  const NAV_HEIGHT_MINI = 'h-20';
  const THRESHOLD = 80;

  window.onscroll = () => scrollFunction();

  const scrollFunction = () => {
    if (
      document.body.scrollTop > THRESHOLD ||
      document.documentElement.scrollTop > THRESHOLD
    ) {
      document.getElementById('navbar')!.classList.remove('px-10');
      document.getElementById('navbar')!.classList.remove(NAV_HEIGHT);
      document.getElementById('navbar')!.classList.add('px-8');
      document.getElementById('navbar')!.classList.add(NAV_HEIGHT_MINI);
    } else {
      document.getElementById('navbar')!.classList.remove('px-8');
      document.getElementById('navbar')!.classList.remove(NAV_HEIGHT_MINI);
      document.getElementById('navbar')!.classList.add('px-10');
      document.getElementById('navbar')!.classList.add(NAV_HEIGHT);
      // bg-slate-900
    }
  };
</script>
